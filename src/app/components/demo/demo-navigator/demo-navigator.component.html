<div class="main-container">
  <div class="info-container">
    <div style="color: white; font-size: xx-large; margin: 10px 10px;" *ngIf="(settings$ | async)?.measureTime">
      <span>Time:</span>  {{currentTime | date:'mm:ss'}}
    </div>
    <div style="color: white; font-size: xx-large; margin: 10px 10px;" *ngIf="(settings$ | async)?.useTimer">
      <span>Timer:</span>  {{timer | date:'mm:ss'}}
    </div>
  </div>
  <div class="action-container">
    <div class="iter-planning-buttons">
      <button mat-stroked-button (click)="newPlanRun()"
              [disabled]="(plannerService.isPlannerBusy() | async) || runsService.getNumRuns() >= (settingsService.getSelectedObject()| async)?.maxRuns">
        New Plan
      </button>
      <button mat-stroked-button (click)="newQuestion();"
              *ngIf="(settingsService.getSelectedObject()| async)?.allowQuestions"
              [disabled]="! (selectedPlan?.status == runStatus.finished || selectedPlan?.status == runStatus.noSolution)">
        Ask Question
      </button>
    </div>
    <button mat-stroked-button (click)="finishDemo()">
      Finish Demo
    </button>
    <button mat-stroked-button (click)="showDemoHelp()">
      Help
    </button>
  </div>

  <div>
    <nav mat-tab-nav-bar>
      <a mat-tab-link *ngFor="let planRun of  runs$ | async"
         (click)="selectPlan(planRun)"
         [active]="selectedPlan && selectedPlan._id == planRun._id"
         [disabled]="(plannerService.isPlannerBusy() | async) || !(planRun.status === runStatus.finished || planRun.status === runStatus.noSolution)">
        <span [matBadge]="planRun.planValue?.toString(10)" matBadgeColor="warn" matBadgeOverlap="false">{{planRun.name}}</span>
      </a>
      <a mat-tab-link *ngIf="(plannerService.isPlannerBusy() | async)" style="padding: 5px">
        <mat-spinner [diameter]="30"></mat-spinner>
      </a>
    </nav>
  </div>

  <div class="bottom-container" [class.two-columns]="!computeNewPlan" [class.three-columns]="computeNewPlan">
    <div style="height: 100%; width: 100%">
      <app-plan-animation-view></app-plan-animation-view>
    </div>

    <div class="divider"></div>

    <div class="center-container" [class.center-one-column]="! askQuestion" [class.center-two-columns]="askQuestion || showAnswer">
      <app-finished-planning-step *ngIf="selectedPlan"></app-finished-planning-step>

      <div *ngIf="! selectedPlan" class="spinner-container">
        <div>
          <h1>Computing plan ...</h1>
          <mat-spinner  diameter="200"></mat-spinner>
        </div>
      </div>

      <ng-container *ngIf="askQuestion">
        <div class="divider"></div>
        <div class="task-creator-container">
          <app-question-creator (finished)="questionCreatorClose($event)"></app-question-creator>
        </div>
      </ng-container>

      <ng-container *ngIf="showAnswer">
        <div class="divider"></div>
        <div class="task-creator-container">
          <app-question-view></app-question-view>
          <app-explanation-view (finished)="showAnswer = false"></app-explanation-view>
        </div>
      </ng-container>
    </div>

    <ng-container *ngIf="computeNewPlan">
      <div class="divider"></div>
      <div class="task-creator-container">
        <app-task-creator (finished)="taskCreatorClose($event)"></app-task-creator>
      </div>
    </ng-container>

  </div>

</div>

<!--              <button mat-flat-button color="primary" [routerLink]="['./planning-step', planRun._id, 'question-step', expRun._id]">Details</button>-->
